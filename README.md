<div dir="rtl">
  
# پروژه ATPlus

**توجه:** این پروژه نسخه بهینه‌شده و ویرایش‌شده‌ای از پروژه اصلی [AmirTunnel-Pro](https://github.com/amircpuir/AmirTunnel-Pro) است که با تمرکز بر بالاترین سرعت انتقال دیتا و پایداری در برابر DPI بازنویسی شده است.

یک تونل معکوس (Reverse TCP Tunnel) فوقِ سریع و هوشمند با قابلیت همگام‌سازی دینامیک پورت‌های Xray. این ابزار به صورت تخصصی برای دور زدن محدودیت‌های سرعت، مخفی‌سازی ترافیک از سیستم‌های فیلترینگ (DPI) و ایجاد یک اتصال پایدار و بدون قطعی بین سرور ایران و سرور خارج طراحی شده است.

---

## امکانات و ابزارهای دور زدن فیلترینگ

- **اثر انگشت مرورگر (uTLS):** استفاده از کتابخانه پیشرفته uTLS برای مخفی کردن ترافیک تونل در قالب مرورگر Chrome (HelloChrome_120) جهت عبور از سیستم‌های Deep Packet Inspection (DPI) ایران.
- **تکنیک لایه‌بندی و تاخیر (TLS Fragmentation):** شکستن اولین بسته‌های Handshake به قطعات بسیار کوچک (64-150 بایت) در سطح پروتکل TCP تا فایروال‌ها نتوانند بسته اتصال را سرهم کرده و تشخیص دهند.
- **تجمیع کانکشن‌ها (Multiplexing/Smux):** عبور دادن کل ترافیک هزاران کاربر فقط از طریق ۲ تا ۵ کانکشن بسیار قدرتمند (Smux Channels) برای مخفی ماندن از ابزارهای مانیتورینگ اتصال و پایین نگه داشتن شدید پینگ.
- **تزریق نویز (HTTP Decoys):** تزریق تصادفی هدرهای گمراه‌کننده‌ مثل `GET / HTTP/1.1` لابه‌لای ترافیک تا هوش مصنوعی فیلترینگ دچار خطای تحلیل شود.
- **پردازش سبک و بدون تاخیر (Native Zero-Copy Pipe):** استفاده از انتقال مستقیم `io.Copy` کرنل لینوکس (Splice) با مدیریت هوشمندانه TCP Half-Close و خواندن وضعیت پورت‌ها از مموری هسته (`/proc/net/tcp`) برای به حداکثر رساندن سرعت انتقال (Throughput) و رساندن مصرف منابع به صفر مطلق.

---

## راهنمای نصب و راه‌اندازی (به صورت سرویس دائمی)

برای نصب راحت و اجرای همیشگی در پس‌زمینه به عنوان سرویس سیستمی (بدون نیاز به screen)، دستور زیر را در سرور خود وارد کنید:

```bash
wget -O install.sh https://raw.githubusercontent.com/ramin-mahmoodi/ATPlus/main/install.sh && chmod +x install.sh && bash install.sh
```

### مراحل نصب:
1. پس از اجرای دستور بالا، از شما نوع سرور پرسیده می‌شود؛ عدد مربوط به ایران یا اروپا را وارد کنید.
2. پورت پل ارتباطی (مثلا `443`) و پورت سینک (مثلا `444`) را وارد کنید.
3. **مهم:** یک رمز عبورِ مشترک و ایمن تعیین کنید. این رمز باید در هر دو سرور کاملاً یکسان باشد.
4. در سرور **خارج**، آی‌پی سرور ایران را وارد کنید.
5. در سرور **ایران**، روش همگام‌سازی پورت‌های Xray (خودکار `y` یا وارد کردن دستی `n`) را انتخاب کنید.

تمام! ابزار نصبگر به طور خودکار `Golang` را نصب کرده، سورس برنامه را کامپایل می‌کند و آن را در پس‌زمینه به عنوان سرویس فعال می‌کند تا حتی پس از ری‌استارت سرور نیز با قدرت به کار خود ادامه دهد.

---

## مدیریت سرویس در لینوکس

برخلاف سیستم‌های سنتی، این نسخه نیازی به Screen ندارد و مستقیما روی کرنل سیستم عامل سوار می‌شود. برای مشاهده وضعیت و مدیریت تونل، از دستورات زیر استفاده کنید:

- **مشاهده وضعیت (ببینید تونل وصل است یا خیر):**
  ```bash
  systemctl status atplus
  ```
- **مشاهده زنده لاگ‌ها و اتصالات:**
  ```bash
  journalctl -u atplus -f
  ```
- **شروع مجدد (ری‌استارت) تونل:**
  ```bash
  systemctl restart atplus
  ```
- **متوقف کردن کامل تونل:**
  ```bash
  systemctl stop atplus
  ```

---

## عیب‌یابی (Troubleshooting)

اگر هنگام اجرای لاگ‌ها با خطای **Address already in use** مواجه شدید، به این معنی است که نسخه‌های قدیمی‌تر اسکریپت هنوز در پس‌زمینه در حال کار هستند.
```bash
systemctl restart atplus
```

</div>
